# Debugging Custom CLI Indexing & Ollama Integration

## 1. Indexing Stuck / Timeout Issues (Resolved)
**Date**: 2026-01-04
**Symptom**: Indexing stuck at `extract_graph` workflow (e.g., 14/26) with no activity in logs for over 20 minutes.
**Root Cause**: 
1.  **Ollama Server Load**: "Noisy neighbour" on the Ollama server caused requests to hang.
2.  **Configuration**: The `request_timeout` in `settings.yaml` was set to `6000.0` (100 minutes), causing the indexer to wait practically forever instead of timing out and retrying.

**Fix**:
- Updated `settings.yaml`: Reduced `request_timeout` from `6000.0` to `180.0` seconds.
- **Action**: Restarted the indexing process to pick up the new timeout settings.

**Verification**: 
- Process is running.
- If a request hangs for >3 minutes, it will now timeout and trigger the retry logic (exponential backoff).

## 2. KeyError: 'title' in extract_graph (Previous Session)
**Context**: Addressed in conversation "Debugging Custom CLI Indexing".
**Symptom**: `KeyError: 'title'` raised during `_merge_entities` in the `extract_graph` workflow.
**Analysis**: 
- Occurs when the `entities` DataFrame generated by the LLM extraction step is missing the 'title' column.
- This can happen if the LLM output is malformed or if the extraction strategy returns an empty result that isn't handled correctly before merging.
**Resolution**:
- Ensured that the `_merge_entities` function gracefully handles missing columns or empty DataFrames, or updated the extraction prompt to strictly enforce output format.
